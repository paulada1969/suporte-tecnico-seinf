<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Solicitação de Suporte Técnico - SEINF</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: auto;
      padding: 20px;
    }
    label {
  display: inline-block;
  width: 180px;
  margin-bottom: 5px;
  vertical-align: top;
}
    input, select, textarea {
      width: 250px;
      padding: 5px;
      margin-bottom: 10px;
    }
    .campo {
      margin-bottom: 10px;
    }
    .hidden {
      display: none;
    }
    .valid {
      background-color: #e0e0e0;
    }
    .invalid {
      background-color: #ffd6d6;
      animation: blink 0.5s steps(1, start) infinite;
    }
    @keyframes blink {
      50% { background-color: #fff; }
    }
    textarea {
      width: 100%;
      max-width: 100%;
      min-height: 80px;
      max-height: 150px;
    }
    .section {
      margin: 20px 0;
      padding: 10px;
      border-top: 1px solid #ccc;
    }
  </style>
</head>
<body>

<h2>Solicitação de Suporte Técnico - SEINF</h2>

<form id="formulario" onsubmit="return false">
  <div class="campo"><label>Nome:</label><input required type="text" id="nome"></div>
  <div class="campo"><label>CPF:</label><input required type="text" id="cpf" pattern="\d{11}" title="Digite exatamente 11 números"></div>
  <div class="campo"><label>Email Institucional:</label><input required type="email" id="email_inst" pattern="^[a-zA-Z0-9._%+-]+@fazenda\.gov\.br$" title="Apenas e-mails @fazenda.gov.br"></div>
  <div class="campo"><label>Email Pessoal:</label><input required type="email" id="email_pessoal"></div>
  <div class="campo"><label>Cargo:</label><input required type="text" id="cargo"></div>
  <div class="campo"><label>Andar:</label><input required type="text" id="andar"></div>
  <div class="campo"><label>Sala:</label><input required type="text" id="sala"></div>
  <div class="campo"><label>Ramal:</label><input required type="text" id="ramal" pattern="\d+"></div>
  <div class="campo"><label>Setor:</label>
    <select id="setor" required>
      <option value="">Selecione...</option>
      <option>ASTEJ</option><option>CAP</option><option>CEGAP</option><option>COGEC</option><option>COJUL</option>
      <option>COSUP</option><option>DIAJU</option><option>DIPAJ</option><option>DIPLA</option><option>DIPRO</option>
      <option>DIREJ</option><option>DIRIS</option><option>DISOR</option><option>SEDOC</option><option>SEGEP</option>
      <option>SEINF</option><option>SELOG</option><option>SEPAJ</option><option>SEPOJ</option><option>SERET</option>
    </select>
  </div>
  <div class="campo"><label>Nº Celular:</label><input required type="text" id="celular" pattern="\d{10,11}" title="Digite o DDD e número (10 ou 11 dígitos)"></div>
  <div class="campo"><label>Órgão:</label><input required type="text" id="orgao"></div>

  <div class="section">
    <strong>Quem está solicitando?</strong><br>
    <input type="radio" name="classificacao" value="conselheiro" onclick="mostrarCampos()" required> Conselheiro
    <input type="radio" name="classificacao" value="servidor" onclick="mostrarCampos()"> Servidor
    <input type="radio" name="classificacao" value="terceirizado" onclick="mostrarCampos()"> Terceirizado
  </div>

  <div id="campos_conselheiro" class="hidden">
    <label>Tipo:</label>
    <input type="radio" name="tipo_conselheiro" value="fazendario"> Fazendário
    <input type="radio" name="tipo_conselheiro" value="contribuinte"> Contribuinte<br>
    <div class="campo"><label>Sessão:</label><input type="text" id="sessao"></div>
    <div class="campo"><label>Câmara:</label><input type="text" id="camara"></div>
    <div class="campo"><label>Turma:</label><input type="text" id="turma"></div>
  </div>

  <div id="campos_servidor" class="hidden">
    <label>Atuação:</label>
    <input type="radio" name="atuacao" value="presencial"> Presencial
    <input type="radio" name="atuacao" value="home"> Home Office
  </div>

  <div id="campos_terceirizado" class="hidden">
    <div class="campo"><label>Empresa:</label><input type="text" id="empresa"></div>
  </div>

  <div class="section">
    <strong>Tipo de Atendimento:</strong><br>
    <input type="radio" name="tipo_atendimento" value="software" onclick="mostrarProblemas()"> Software
    <input type="radio" name="tipo_atendimento" value="hardware" onclick="mostrarProblemas()"> Hardware
  </div>

  <div id="problemas_software" class="hidden">
    <strong>Tipo de Problemas:</strong><br>
    <input type="checkbox" name="problema_software" value="Erro do Sistema"> Erro do Sistema
    <input type="checkbox" name="problema_software" value="Pacote Office 365"> Office 365
    <input type="checkbox" name="problema_software" value="Plataforma CARF"> Plataforma CARF
    <input type="checkbox" name="problema_software" value="Erro de Programas"> Programas
    <input type="checkbox" name="problema_software" value="Erro de Senhas"> Senhas
    <input type="checkbox" name="problema_software" value="Erro de site"> Site
    <input type="checkbox" name="problema_software" value="Instalar Programa"> Instalar Programa
    <input type="checkbox" name="problema_software" value="Pastas T e O"> Pastas T e O
    <input type="checkbox" name="problema_software" value="Email"> Email
    <input type="checkbox" name="problema_software" value="Outros"> Outros
  </div>

  <div id="problemas_hardware" class="hidden">
    <strong>Tipos de Dispositivos:</strong><br>
    <input type="checkbox" name="problema_hardware" value="PC"> PC
    <input type="checkbox" name="problema_hardware" value="Notebook"> Notebook
    <input type="checkbox" name="problema_hardware" value="Dockstation"> Dockstation
    <input type="checkbox" name="problema_hardware" value="Tela"> Tela
    <input type="checkbox" name="problema_hardware" value="Projetor"> Projetor
    <input type="checkbox" name="problema_hardware" value="End Point"> End Point
    <input type="checkbox" name="problema_hardware" value="Outros"> Outros
  </div>

  <div class="section">
    <label for="descricao">Descrição do Problema (máx. 500 caracteres):</label><br>
    <textarea id="descricao" maxlength="500" required></textarea>
  </div>

  <div class="section">
    <label>Prioridade:</label><br>
    <input type="checkbox" name="prioridade" value="Alta"> Alta
    <input type="checkbox" name="prioridade" value="Moderado"> Moderado
    <input type="checkbox" name="prioridade" value="Agendado"> Agendado
  </div>

  <button type="button" onclick="enviarEmail('outlook')">Enviar por Outlook</button>
  <button type="button" onclick="enviarEmail('gmail')">Enviar por Gmail</button>
  <button type="button" onclick="window.open('https://bit.ly/SuporteTecnicoSEINF', '_blank')">Enviar por WhatsApp</button>
</form>

<script>
function mostrarCampos() {
  document.getElementById('campos_conselheiro').style.display = 'none';
  document.getElementById('campos_servidor').style.display = 'none';
  document.getElementById('campos_terceirizado').style.display = 'none';
  const val = document.querySelector('input[name="classificacao"]:checked').value;
  if (val === 'conselheiro') document.getElementById('campos_conselheiro').style.display = 'block';
  else if (val === 'servidor') document.getElementById('campos_servidor').style.display = 'block';
  else if (val === 'terceirizado') document.getElementById('campos_terceirizado').style.display = 'block';
  document.getElementById('setor').required = (val !== 'conselheiro');
}

function mostrarProblemas() {
  document.getElementById('problemas_software').style.display = 'none';
  document.getElementById('problemas_hardware').style.display = 'none';
  const tipo = document.querySelector('input[name="tipo_atendimento"]:checked').value;
  if (tipo === 'software') document.getElementById('problemas_software').style.display = 'block';
  else if (tipo === 'hardware') document.getElementById('problemas_hardware').style.display = 'block';
}

function enviarEmail(tipo) {
  const nome = document.getElementById('nome').value;
  const email = document.getElementById('email_inst').value;
  const msg = document.getElementById('descricao').value;
  const ramal = document.getElementById('ramal').value;
  const setor = document.getElementById('setor').value;
  const classificacao = document.querySelector('input[name="classificacao"]:checked')?.value || "";
  const protocolo = Math.floor(100000 + Math.random() * 900000);
  const destinatario = tipo === 'gmail' ? 'carf.seinf@gmail.com' : 'carf.seinf@outlook.com';
  const assunto = `Solicitação de Suporte Técnico - Protocolo ${protocolo}`;
  const corpo = encodeURIComponent(`Solicitação de Suporte Técnico
Nome: ${nome}
Email: ${email}
Classificação: ${classificacao}
Setor: ${setor}
Ramal: ${ramal}

Descrição do Problema:
${msg}

Aguarde contato dos Técnicos do SEINF.`);
  const url = `mailto:${destinatario}?subject=${assunto}&body=${corpo}`;
  window.open(url, '_blank');
  alert('✅ Sucesso! Sua solicitação foi preparada para envio. Verifique seu Outlook ou Gmail para confirmação.');
}
</script>

</body>
</html>

