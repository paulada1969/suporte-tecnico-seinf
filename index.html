<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Solicitação de Suporte Técnico - SEINF</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: auto;
      padding: 20px;
    }
    label {
      display: inline-block;
      width: 180px;
      margin-bottom: 5px;
      vertical-align: top;
    }
    input, select, textarea {
      width: 250px;
      padding: 5px;
      margin-bottom: 10px;
    }
    .campo { margin-bottom: 10px; }
    .section {
      margin: 20px 0;
      padding: 10px;
      border-top: 1px solid #ccc;
    }
    .hidden { display: none; }
  </style>
</head>
<body>
<h2>Solicitação de Suporte Técnico - SEINF</h2>

<form id="formulario" onsubmit="return false">
  <div class="campo"><label>Nome:</label><input required type="text" id="nome"></div>
  <div class="campo"><label>CPF:</label><input required type="text" id="cpf" pattern="\d{11}" title="Digite 11 números"></div>
  <div class="campo"><label>Email Institucional:</label><input required type="email" id="email_inst" pattern="^[a-zA-Z0-9._%+-]+@fazenda\.gov\.br$" title="Apenas emails @fazenda.gov.br"></div>
  <div class="campo"><label>Email Pessoal:</label><input required type="email" id="email_pessoal"></div>
  <div class="campo"><label>Ramal:</label><input required type="text" id="ramal" pattern="\d+"></div>
  <div class="campo"><label>Setor:</label>
    <select id="setor" required>
      <option value="">Selecione...</option>
      <option>ASTEJ</option><option>CAP</option><option>CEGAP</option><option>COGEC</option><option>COJUL</option>
      <option>COSUP</option><option>DIAJU</option><option>DIPAJ</option><option>DIPLA</option><option>DIPRO</option>
      <option>DIREJ</option><option>DIRIS</option><option>DISOR</option><option>SEDOC</option><option>SEGEP</option>
      <option>SEINF</option><option>SELOG</option><option>SEPAJ</option><option>SEPOJ</option><option>SERET</option>
    </select>
  </div>
  <div class="section">
    <strong>Quem está solicitando?</strong><br>
    <input type="radio" name="classificacao" value="conselheiro" onclick="mostrarCampos()" required> Conselheiro
    <input type="radio" name="classificacao" value="servidor" onclick="mostrarCampos()"> Servidor
    <input type="radio" name="classificacao" value="terceirizado" onclick="mostrarCampos()"> Terceirizado
  </div>

  <div class="section">
    <strong>Tipo de Atendimento:</strong><br>
    <input type="radio" name="tipo_atendimento" value="software"> Software
    <input type="radio" name="tipo_atendimento" value="hardware"> Hardware
  </div>

  <div class="section">
    <label for="descricao">Descrição do Problema:</label><br>
    <textarea id="descricao" maxlength="500" required></textarea>
  </div>

  <button type="button" onclick="enviarEmail('outlook')">Enviar por Outlook</button>
  <button type="button" onclick="enviarEmail('gmail')">Enviar por Gmail</button>
  <button type="button" onclick="enviarWhatsapp()">Enviar por WhatsApp</button>
</form>

<script>
function mostrarCampos() {
  const classificacao = document.querySelector('input[name="classificacao"]:checked')?.value;
  document.getElementById('setor').required = (classificacao !== 'conselheiro');
}

function gerarProtocolo() {
  return Math.floor(100000 + Math.random() * 900000);
}

function montarMensagem() {
  const nome = document.getElementById('nome').value;
  const email = document.getElementById('email_inst').value;
  const emailPessoal = document.getElementById('email_pessoal').value;
  const classificacao = document.querySelector('input[name="classificacao"]:checked')?.value || '';
  const setor = document.getElementById('setor').value;
  const ramal = document.getElementById('ramal').value;
  const descricao = document.getElementById('descricao').value;
  const protocolo = gerarProtocolo();

  const corpo = `Solicitação de Suporte Técnico
Nome: ${nome}
Email: ${email}
Classificação: ${classificacao}
Setor: ${setor}
Ramal: ${ramal}

Descrição do Problema:
${descricao}

Aguarde contato dos Técnicos do SEINF.`;

  return { corpo, protocolo, emailPessoal };
}

function enviarEmail(destino) {
  const { corpo, protocolo, emailPessoal } = montarMensagem();
  const destinatario = destino === 'gmail' ? 'carf.seinf@gmail.com' : 'carf.seinf@outlook.com';
  const assunto = `Solicitação de Suporte Técnico - Protocolo ${protocolo}`;

  const mailto = `mailto:${destinatario}?cc=${emailPessoal}&subject=${encodeURIComponent(assunto)}&body=${encodeURIComponent(corpo)}`;
  window.open(mailto, '_blank');
  alert('✅ Solicitação preparada! Verifique seu Gmail ou Outlook.');
}

function enviarWhatsapp() {
  const { corpo, protocolo } = montarMensagem();
  const numero = '556130553294'; // número suporte SEINF
  const url = `https://wa.me/${numero}?text=${encodeURIComponent(corpo + "\n\nProtocolo: " + protocolo)}`;
  window.open(url, '_blank');
  alert('✅ Mensagem gerada para o WhatsApp. Aguarde o contato dos Técnicos do SEINF.');
}
</script>
</body>
</html>


