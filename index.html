
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Formulário de Suporte Técnico - CARF-SEINF</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    label { display: block; margin-top: 10px; }
    select, input, textarea { width: 300px; padding: 5px; margin-top: 5px; }
    .hidden { display: none; }
  </style>
</head>
<body>
  <h1>Formulário de Suporte Técnico - CARF-SEINF</h1>
  <form id="formulario">
    <label>Nome completo: <input type="text" id="nome" required></label>
    <label>CPF: <input type="text" id="cpf" required></label>
    <label>Email institucional: <input type="email" id="email" required></label>

    <label>Setor:
      <select id="setor" required>
        <option value="">Selecione...</option>
        <option>ASTEJ</option><option>CAP</option><option>CEGAP</option><option>COGEC</option><option>COJUL</option>
        <option>COSUP</option><option>DIAJU</option><option>DIPAJ</option><option>DIPLA</option><option>DIPRO</option>
        <option>DIREJ</option><option>DIRIS</option><option>DISOR</option><option>SEDOC</option><option>SEGEP</option>
        <option>SEINF</option><option>SELOG</option><option>SEPAJ</option><option>SEPOJ</option><option>SERET</option>
      </select>
    </label>

    <label>Quem está solicitando?
      <select id="tipoSolicitante" required>
        <option value="">Selecione...</option>
        <option value="conselheiro">Conselheiro</option>
        <option value="servidor">Servidor</option>
        <option value="terceirizado">Terceirizado</option>
      </select>
    </label>

    <div id="camposConselheiro" class="hidden">
      <label><input type="radio" name="tipoConselheiro" value="Fazendário"> Fazendário</label>
      <label><input type="radio" name="tipoConselheiro" value="Contribuinte"> Contribuinte</label>
      <label>Sessão: <input type="text"></label>
      <label>Turma: <input type="text"></label>
      <label>Câmara: <input type="text"></label>
    </div>

    <div id="camposServidor" class="hidden">
      <label>Atuação: 
        <select><option value="">Selecione...</option><option>Presencial</option><option>Home Office</option></select>
      </label>
    </div>

    <div id="camposTerceirizado" class="hidden">
      <label>Empresa: <input type="text"></label>
    </div>

    <label>Cargo: <input type="text" required></label>
    <label>Andar: <input type="text" required></label>
    <label>Sala: <input type="text" required></label>
    <label>Ramal: <input type="text" required></label>
    <label>Nº de Celular: <input type="text" required></label>
    <label>Órgão: <input type="text" required></label>

    <label>Tipo de Atendimento:
      <select id="tipoAtendimento" required>
        <option value="">Selecione...</option>
        <option value="software">Software</option>
        <option value="hardware">Hardware</option>
      </select>
    </label>

    <label>Presencial ou Remoto:
      <select required>
        <option value="">Selecione...</option>
        <option>Presencial</option>
        <option>Remoto</option>
      </select>
    </label>

    <div id="softwareFields" class="hidden">
      <label><input type="checkbox" value="Erro de sistema"> Erro de sistema</label>
      <label><input type="checkbox" value="Falha no SEI"> Falha no SEI</label>
      <label><input type="checkbox" value="Atualização de software"> Atualização de software</label>
    </div>

    <div id="hardwareFields" class="hidden">
      <label><input type="checkbox" value="Monitor com defeito"> Monitor com defeito</label>
      <label><input type="checkbox" value="Teclado ou mouse não funcionam"> Teclado ou mouse não funcionam</label>
      <label><input type="checkbox" value="Notebook com lentidão"> Notebook com lentidão</label>
    </div>

    <label>Descreva o problema:
      <textarea rows="4" required></textarea>
    </label>

    <button type="button" onclick="enviarPorEmail('gmail')">Enviar por Gmail</button>
    <button type="button" onclick="enviarPorEmail('outlook')">Enviar por Outlook</button>
    <button type="button" onclick="enviarPorWhatsApp()">Enviar por WhatsApp</button>
  </form>

  <script>
    const tipoSolicitante = document.getElementById('tipoSolicitante');
    const tipoAtendimento = document.getElementById('tipoAtendimento');

    tipoSolicitante.addEventListener('change', () => {
      document.getElementById('camposConselheiro').classList.add('hidden');
      document.getElementById('camposServidor').classList.add('hidden');
      document.getElementById('camposTerceirizado').classList.add('hidden');
      if (tipoSolicitante.value === 'conselheiro') {
        document.getElementById('camposConselheiro').classList.remove('hidden');
      } else if (tipoSolicitante.value === 'servidor') {
        document.getElementById('camposServidor').classList.remove('hidden');
      } else if (tipoSolicitante.value === 'terceirizado') {
        document.getElementById('camposTerceirizado').classList.remove('hidden');
      }
    });

    tipoAtendimento.addEventListener('change', () => {
      document.getElementById('softwareFields').classList.add('hidden');
      document.getElementById('hardwareFields').classList.add('hidden');
      if (tipoAtendimento.value === 'software') {
        document.getElementById('softwareFields').classList.remove('hidden');
      } else if (tipoAtendimento.value === 'hardware') {
        document.getElementById('hardwareFields').classList.remove('hidden');
      }
    });

    function gerarProtocolo() {
      return Math.floor(Math.random() * 1000000000);
    }

    function validarEmail(email) {
      return email.endsWith("@fazenda.gov.br");
    }

    function enviarPorEmail(tipo) {
      const email = document.getElementById("email").value;
      const nome = document.getElementById("nome").value;
      const protocolo = gerarProtocolo();
      if (!validarEmail(email)) {
        alert("Por favor, insira um e-mail institucional válido (@fazenda.gov.br)");
        return;
      }

      const assunto = encodeURIComponent(`[PROTOCOLO ${protocolo}] Solicitação de Suporte Técnico`);
      const corpo = encodeURIComponent(`Olá, segue solicitação de suporte técnico do usuário ${nome}.\n\nProtocolo: ${protocolo}\n\nDemais dados no formulário.`);

      const para = tipo === "gmail"
        ? `mailto:carf.seinf@gmail.com?cc=${email}&subject=${assunto}&body=${corpo}`
        : `mailto:carf.seinf@outlook.com?cc=${email}&subject=${assunto}&body=${corpo}`;
      window.location.href = para;
    }

    function enviarPorWhatsApp() {
      const nome = document.getElementById("nome").value;
      const cpf = document.getElementById("cpf").value;
      const email = document.getElementById("email").value;
      const protocolo = gerarProtocolo();
      const mensagem = encodeURIComponent(`Olá, aqui é ${nome} (CPF: ${cpf})\nE-mail: ${email}\n\nProtocolo: ${protocolo}\nAguarde o contato dos Técnicos do SEINF.`);
      window.open(`https://bit.ly/SuporteTecnicoSEINF?text=${mensagem}`, '_blank');
    }
  </script>
</body>
</html>

